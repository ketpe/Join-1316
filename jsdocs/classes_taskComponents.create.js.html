<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: classes/taskComponents.create.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: classes/taskComponents.create.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @description This file contains methods related to creating a new task.
 * It extends the TaskComponents class with functionalities for handling task creation,
 * including form submission, dialog management, and task data preparation.
 * Loaded by add task page
 * @see TaskComponents
 * @mixin taskComponents.create
 */

(function () {
    const taskComponentsPrototype = TaskComponents.prototype;

    /**
     * @description Gets the task details for submission.
     * @function getTaskDetails
     * @memberof taskComponents.create
     * @returns {Array} - The task details array.
     */
    Object.defineProperty(TaskComponents.prototype, "getTaskDetails", {
        get: function () {
            return [
                this.currentPriority,
                this.currentCategory['id'],
                this.currentSubTasks,
                this.currentContactAssignList
            ];
        }
    });

    /**
    * @description Clears the Add Task form by reloading the page.
    * This effectively resets all form fields and local data.
    * @function addTaskFormClear
    * @memberof taskComponents.create
    * @returns {void}
    */
    taskComponentsPrototype.addTaskFormClear = function() {
        location.reload();
    };

    /**
    * @description Handles the creation of a new task.
    * Prepares the data from the form and the local data to create a new task.
    * Uses the CreateNewTask class to handle the task creation process.
    * After the task is created, it shows a confirmation dialog and navigates to the board view.
    * @function addTaskCreateTask
    * @memberof taskComponents.create
    * @param {Event} event - The event object from the form submission.
    * @returns {Promise&lt;void>}
     */
    taskComponentsPrototype.addTaskCreateTask = async function(event) {

        if (event) event.preventDefault();
        const addTaskFormData = new FormData(event.currentTarget);

        const currentTask = new Task(
            getNewUid(),
            addTaskFormData.get('task-title'),
            addTaskFormData.get('task-description'),
            addTaskFormData.get('due-date'),
            this.currentPriority,
            this.currentCategory['id'],
            this.currentStateCategory
        );

        const createNewTask = new CreateNewTask(currentTask, this.currentSubTasks, this.currentContactAssignList, this.currentUser);
        await createNewTask.start();
        this.addTaskAfterSafe(this.getIsDialog(), event);
    }

    /**
     * @description Checks if the add task form is in a dialog.
     * @function getIsDialog
     * @memberof taskComponents.create
     * @returns {boolean} True if the form is in a dialog, false otherwise.
     */
    taskComponentsPrototype.getIsDialog = function() {
        const forms = document.querySelectorAll('form');
        if (!forms) { return false; }

        let formAddTask;

        forms.forEach((form) => {
            if (form.hasAttribute('data-isDialog')) {formAddTask = form;}
        });

        if (!formAddTask) { return false; }

        const isDialog = formAddTask.getAttribute('data-isDialog');
        return isDialog === "true";
    };

    /**
    * @description Shows a confirmation dialog after a task is successfully added.
    * Closes the Add Task dialog if it was opened from a dialog view.
    * Navigates to the board view after the confirmation dialog is closed.
    * @function addTaskAfterSafe
    * @memberof taskComponents.create
    * @param {boolean} fromDialog - Indicates if the call is from a dialog.
    * @returns {void}
    */
    taskComponentsPrototype.addTaskAfterSafe = function (fromDialog = false) {
        this.toggleDialogDisplay();
        const dialog = document.getElementById('add-task-safe-dialog');
        dialog.classList.add('safe-dialog-show');
        dialog.showModal();
        setTimeout(function () {
            dialog.close();
            !fromDialog ? navigateToBoard() : closeTheDialog(null, 'add-task-dialog');
        }, 1800);
    };

    /**
     * @description Toggles the display of the Add Task confirmation dialog.
     * @function toggleDialogDisplay
     * @memberof taskComponents.create
     * @return {void}
     */
    taskComponentsPrototype.toggleDialogDisplay = function() {
        document.getElementById('add-task-safe-dialog').classList.toggle('visually-hidden');
    };

    /**
    * @description Handles mouse click events within the Add Task window.
    * Closes the contact and category selection lists if the click occurs outside of them.
    * @function addTaskWindowMouseClick
    * @memberof taskComponents.create
    * @param {MouseEvent} e - The mouse event object.
    * @returns {void}
    */
    taskComponentsPrototype.addTaskWindowMouseClick = function(e) {

        if (!e.target.closest(".contact-select-container") &amp;&amp; !e.target.closest(".contact-List-container") &amp;&amp; this.isContactListOpen) {
            this.isContactListOpen = false;
            this.showAndHideContacts("hide");
        }

        if (!e.target.closest('.category-select-container') &amp;&amp; !e.target.closest('.category-list-container') &amp;&amp; this.isCategoryListOpen) {
            this.isCategoryListOpen = false;
            this.showAndHideCategories('hide');
        }
    };

    /**
     * @description Reads the current task date into variables.
     * @function readCurrentTaskDateIntoVariables
     * @memberof taskComponents.create
     * @returns {void}
     */
    taskComponentsPrototype.readCurrentTaskDateIntoVariables = function() {
        this.currentSubTasks = this.currentTask['subTasks'];
        this.currentDueDate = this.currentTask['dueDate'];
        this.currentTitle = this.currentTask['title'];
        this.currentCategory = this.currentTask['categoryData'];
    };

})();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-scripts_firebase.html">scripts/firebase</a></li></ul><h3>Namespaces</h3><ul><li><a href="addEditContacts.html">addEditContacts</a></li><li><a href="addTaskTemplate.html">addTaskTemplate</a></li><li><a href="app.html">app</a></li><li><a href="board.html">board</a></li><li><a href="boardDatabase.html">boardDatabase</a></li><li><a href="boardDetailView.html">boardDetailView</a></li><li><a href="boardSearch.html">boardSearch</a></li><li><a href="boardTaskTemplate.html">boardTaskTemplate</a></li><li><a href="boardTasks.html">boardTasks</a></li><li><a href="boardUtils.html">boardUtils</a></li><li><a href="contactTemplates.html">contactTemplates</a></li><li><a href="contacts.html">contacts</a></li><li><a href="dragAndDrop.html">dragAndDrop</a></li><li><a href="greeting.html">greeting</a></li><li><a href="help.html">help</a></li><li><a href="landscapeBlock.html">landscapeBlock</a></li><li><a href="login.html">login</a></li><li><a href="navigations.html">navigations</a></li><li><a href="openCloseDialog.html">openCloseDialog</a></li><li><a href="privacyLegal.html">privacyLegal</a></li><li><a href="script.html">script</a></li><li><a href="summary.html">summary</a></li><li><a href="taskComponents_.html">taskComponents</a></li></ul><h3>Classes</h3><ul><li><a href="AddTaskCache.html">AddTaskCache</a></li><li><a href="AddTaskMobileUtil.html">AddTaskMobileUtil</a></li><li><a href="AddTaskUtils.html">AddTaskUtils</a></li><li><a href="BoardTaskDetailDeleteUtil.html">BoardTaskDetailDeleteUtil</a></li><li><a href="BoardTaskDetailEditUtils.html">BoardTaskDetailEditUtils</a></li><li><a href="BoardTaskDetailViewUtils.html">BoardTaskDetailViewUtils</a></li><li><a href="Contact.html">Contact</a></li><li><a href="ContactAssigned.html">ContactAssigned</a></li><li><a href="CreateNewTask.html">CreateNewTask</a></li><li><a href="DueDateCheck.html">DueDateCheck</a></li><li><a href="EditTaskSafeUtil.html">EditTaskSafeUtil</a></li><li><a href="FirebaseDatabase.html">FirebaseDatabase</a></li><li><a href="Subtask.html">Subtask</a></li><li><a href="SubtaskToTask.html">SubtaskToTask</a></li><li><a href="Task.html">Task</a></li><li><a href="TaskComponents.html">TaskComponents</a></li><li><a href="TaskElements.html">TaskElements</a></li></ul><h3>Mixins</h3><ul><li><a href="taskComponents.categories.html">categories</a></li><li><a href="taskComponents.contacts.html">contacts</a></li><li><a href="taskComponents.create.html">create</a></li><li><a href="taskComponents.layout.html">layout</a></li><li><a href="taskComponents.priority.html">priority</a></li><li><a href="taskComponents.subtasks.html">subtasks</a></li><li><a href="taskComponents.validation.html">validation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#firebaseConfig">firebaseConfig</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Nov 03 2025 20:17:50 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
