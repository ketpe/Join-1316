<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scripts/privacyLegal.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scripts/privacyLegal.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview
 * @namespace privacyLegal
 * @description Handles the loading and resizing of the Privacy Policy and Legal Notice pages.
 * Adjusts content based on window size for responsive design.
 * Manages navigation back to the source page.
 */

let backToLoginPage = false;
let resizeLockPandL = false;
let currentView = "";
const MOBILE = "mobile";
const DESKTOP = "desktop";


/**
 * @function privacyOrLegalLoad
 * @memberof privacyLegal
 * @description Initializes the Privacy Policy or Legal Notice page on load.
 * @param {string} privacyOrLegal 
 * @returns {Promise&lt;void>}
 */
async function privacyOrLegalLoad(privacyOrLegal) {
    let param = new URLSearchParams(document.location.search);
    let pageParam = param.get('backToLogin');

    backToLoginPage = pageParam != null &amp;&amp; pageParam.startsWith("true");
    const [height, width] = getCurrentWindowSize();

    if(width &lt;= 880 &amp;&amp; currentView !== MOBILE){
        await loadInMobileMode(privacyOrLegal);
    }else if(width > 880 &amp;&amp; currentView !== DESKTOP){
        await loadInDesktopMode(privacyOrLegal);
    }
    window.addEventListener('resize', () => privacyOrLegalResize(privacyOrLegal));
    window.addEventListener('resize', updateLandscapeBlock);
    await setHeaderElements();
}


/**
 * Sets the header elements visibility based on login status.
 * @function setHeaderElements
 * @memberof privacyLegal
 * @returns {Promise&lt;void>} 
 */
async function setHeaderElements() {
    let logInStatus = getLogStatus();
    if(logInStatus !== "0"){
        await renderUserInitial();
    }else{
        const headerElements = document.querySelector("div.help-profile-actions") || document.querySelector('div.help-profile-actions-mobile');
        if(!headerElements){return;}
        headerElements.classList.add('d-none');
    }
    
}


/**
 * @function privacyOrLegalResize
 * @memberof privacyLegal
 * @description Handles window resize events to adjust the Privacy Policy or Legal Notice page layout.
 * Uses a lock to prevent multiple simultaneous executions.
 * @param {string} privacyOrLegal 
 * @returns {void}
 */
async function privacyOrLegalResize(privacyOrLegal){
    if(resizeLockPandL){return;}
    resizeLockPandL = true;

    const [height, width] = getCurrentWindowSize();
    if(width &lt;= 880 &amp;&amp; currentView !== MOBILE){
        await loadInMobileMode(privacyOrLegal);
    }else if(width > 880 &amp;&amp; currentView !== DESKTOP){
        await loadInDesktopMode(privacyOrLegal);
    }
    await setHeaderElements();
    resizeLockPandL = false;

}

/**
 * @function loadInDesktopMode
 * @memberof privacyLegal
 * @description Loads the Privacy Policy or Legal Notice content in desktop mode.
 * @param {string} pOrL - The type of content to load ("privacy" or "legal")
 * @return {Promise&lt;void>}
 */
async function loadInDesktopMode(pOrL) {
    const content = pOrL == "privacy" ? "privacyPolicyDesktopContent.html" : "legalNoticeDesktopContent.html";
    clearPorLBody();

    if(backToLoginPage){
        await includeHtmlForNode("body", content);
        await Promise.all([
            includeHtml("navbar", "navbarDesktopSpezial.html"),
            includeHtml("header", "headerDesktop.html")
        ]);
    }else{
        await includeHtmlForNode("body", content);
        await Promise.all([
            includeHtml("navbar", "navbarDesktop.html"),
            includeHtml("header", "headerDesktop.html")
        ]);
    }
    currentView = DESKTOP;
    setPrivacyOrLegalButtonActiv(pOrL, "desktop");
}

/**
 * @function loadInMobileMode
 * @memberof privacyLegal
 * @description Loads the Privacy Policy or Legal Notice content in mobile mode.
 * @param {string} pOrL - The type of content to load ("privacy" or "legal")
 * @return {Promise&lt;void>}
 */
async function loadInMobileMode(pOrL) {
    const content = pOrL == "privacy" ? "privacyPolicyMobileContent.html" : "legalNoticeMobileContent.html";
    clearPorLBody();

    if(backToLoginPage){
        await includeHtmlForNode("body", content);
        await Promise.all([
            includeHtml("header", "headerMobile.html"),
            includeHtml("navbar", "navbarMobilspezial.html")
        ]);
    }else{

        await includeHtmlForNode("body", content);
        await Promise.all([
            includeHtml("header", "headerMobile.html"),
            includeHtml("navbar", "navbarMobile.html")
        ]);
    }
    currentView = MOBILE;
    setPrivacyOrLegalButtonActiv(pOrL, "mobile");
}

/**
 * @function setPrivacyOrLegalButtonActiv
 * @memberof privacyLegal
 * @description Sets the active state of the compliance button based on the current view.
 * @param {string} pOrL - The type of content ("privacy" or "legal")
 * @param {string} desktopOrMobile - The current view ("desktop" or "mobile")
 * @returns {void}
 */
function setPrivacyOrLegalButtonActiv(pOrL, desktopOrMobile){
    const buttonClass = desktopOrMobile == "desktop" ? ".compliance-button" : '.nav-mobile-btn-compliance';
    const activeClass = desktopOrMobile == "desktop" ? "compliance-button-active" : "nav-mobile-btn-active";
    const buttons = document.querySelectorAll(buttonClass);
    if(!buttons){
        return;
    }

    buttons.forEach((btn) => {
        if(btn.getAttribute('data-target') == pOrL){
            btn.classList.add(activeClass);
            btn.setAttribute('disabled', 'true');
        }
    });
}

/**
 * @function clearPorLBody
 * @memberof privacyLegal
 * @description Clears the body content of the Privacy Policy or Legal Notice page.
 * @returns {void}
 */
function clearPorLBody() {
    document.querySelector('body').innerHTML = "";
}

/**
 * @function backToSourcePage
 * @memberof privacyLegal
 * @description Navigates back to the source page, either the login page or the previous page in history.
 * @returns {void}
 */
function backToSourcePage(){
    if(backToLoginPage){
        navigateToLogin();
    }else{
        history.back();
    }
}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-scripts_firebase.html">scripts/firebase</a></li></ul><h3>Namespaces</h3><ul><li><a href="addEditContacts.html">addEditContacts</a></li><li><a href="addTaskTemplate.html">addTaskTemplate</a></li><li><a href="app.html">app</a></li><li><a href="board.html">board</a></li><li><a href="boardDatabase.html">boardDatabase</a></li><li><a href="boardDetailView.html">boardDetailView</a></li><li><a href="boardSearch.html">boardSearch</a></li><li><a href="boardTaskTemplate.html">boardTaskTemplate</a></li><li><a href="boardTasks.html">boardTasks</a></li><li><a href="boardUtils.html">boardUtils</a></li><li><a href="contactTemplates.html">contactTemplates</a></li><li><a href="contacts.html">contacts</a></li><li><a href="dragAndDrop.html">dragAndDrop</a></li><li><a href="dueDateCheck_.html">dueDateCheck</a></li><li><a href="greeting.html">greeting</a></li><li><a href="help.html">help</a></li><li><a href="landscapeBlock.html">landscapeBlock</a></li><li><a href="login.html">login</a></li><li><a href="navigations.html">navigations</a></li><li><a href="openCloseDialog.html">openCloseDialog</a></li><li><a href="privacyLegal.html">privacyLegal</a></li><li><a href="script.html">script</a></li><li><a href="summary.html">summary</a></li><li><a href="taskComponents_.html">taskComponents</a></li></ul><h3>Classes</h3><ul><li><a href="AddTaskCache.html">AddTaskCache</a></li><li><a href="AddTaskMobileUtil.html">AddTaskMobileUtil</a></li><li><a href="AddTaskUtils.html">AddTaskUtils</a></li><li><a href="BoardTaskDetailDeleteUtil.html">BoardTaskDetailDeleteUtil</a></li><li><a href="BoardTaskDetailEditUtils.html">BoardTaskDetailEditUtils</a></li><li><a href="BoardTaskDetailViewUtils.html">BoardTaskDetailViewUtils</a></li><li><a href="Contact.html">Contact</a></li><li><a href="ContactAssigned.html">ContactAssigned</a></li><li><a href="CreateNewTask.html">CreateNewTask</a></li><li><a href="EditTaskSafeUtil.html">EditTaskSafeUtil</a></li><li><a href="FirebaseDatabase.html">FirebaseDatabase</a></li><li><a href="Subtask.html">Subtask</a></li><li><a href="SubtaskToTask.html">SubtaskToTask</a></li><li><a href="Task.html">Task</a></li><li><a href="TaskComponents.html">TaskComponents</a></li><li><a href="TaskElements.html">TaskElements</a></li><li><a href="dueDateCheck.DueDateCheck.html">DueDateCheck</a></li></ul><h3>Mixins</h3><ul><li><a href="taskComponents.categories.html">categories</a></li><li><a href="taskComponents.contacts.html">contacts</a></li><li><a href="taskComponents.create.html">create</a></li><li><a href="taskComponents.layout.html">layout</a></li><li><a href="taskComponents.priority.html">priority</a></li><li><a href="taskComponents.subtasks.html">subtasks</a></li><li><a href="taskComponents.validation.html">validation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#firebaseConfig">firebaseConfig</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Nov 13 2025 19:35:00 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
