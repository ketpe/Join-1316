<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: classes/firebaseDatabase.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: classes/firebaseDatabase.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Class for interacting with Firebase Realtime Database.
 * Provides methods for authentication, data retrieval, updating, and deletion.
 * @class FirebaseDatabase
 * @property {Object} constructor - The constructor for the FirebaseDatabase class.
 * @example
 * const firebaseDB = new FirebaseDatabase();
 */ 

class FirebaseDatabase {

    constructor() {}

    /**
     * Authenticates the user and executes the provided callback function.
     * @param {Function} callback - The callback function to execute after authentication.
     * @returns {Promise} A promise that resolves with the result of the callback function.
     */
    async getFirebaseLogin(callback) {

        return new Promise((resolve, reject) => {
            const unsubscribe = firebaseOnAutheChanged(firebaseAuth, async (user) => {
                if (!user) { return; }
                unsubscribe();
                try {
                    const resultData = await callback();
                    resolve(resultData);
                } catch (error) {
                    reject(error);
                }
            });
        });
    }

    /**
     * Retrieves all data from the specified table.
     * @param {string} tableName - The name of the table to retrieve data from.
     * @returns {Array} An array of all data entries in the table.
     */
    async getAllData(tableName = "") {
        try {

            const database = firebaseGetDatabase();
            const databaseRef = firebaseRef(database);
            const databaseTableData = await firebaseGet(firebaseChild(databaseRef, tableName));

            return databaseTableData.exists() ? Object.values(databaseTableData.val()).filter(data => data != null) : [];
        } catch (error) {
            console.error(error.message);
            return [];
        }

    }

    /**
     * Retrieves data from the specified table by key and value.
     * @param {string} key - The key to search by.
     * @param {string|number} values - The value to match.
     * @param {string} tableName - The name of the table to search in.
     * @returns {Object|null} The found data object or null if not found.
     */
    async getDataByKey(key = "", values, tableName = "") {
        let dataArray = await this.getAllData(tableName);
        return dataArray.length > 0 ? dataArray.find(x => x[key] == values) : null;
    }

    /**
     * Retrieves and sorts all contacts by first name.
     * @returns {Array} An array of sorted contact objects.
     */
    async getSortedContact() {
        const contacts = await this.getAllData("contacts");
        let contactssorted = contacts.sort((a, b) => a.firstname.localeCompare(b.firstname));
        return contactssorted
    }

    /**
     * Updates data at the specified path.
     * @param {string} path - The path to the data to update.
     * @param {Object} data - The new data to set.
     * @returns {boolean} True if the update was successful, false otherwise.
     */
    async updateData(path, data) {

        try {
            const database = firebaseGetDatabase();
            const databaseRef = firebaseRef(database, path);
            await firebaseUpdate(databaseRef, data)
            return true;
        } catch (error) {
            return false;
        }
    }

    /**
     * Puts data at the specified path.
     * @param {string} path - The path to the data to set.
     * @param {Object} data - The data to set.
     * @returns {boolean} True if the operation was successful, false otherwise.
     */
    async putData(path, data) {
        try {
            const database = firebaseGetDatabase();
            const databaseRef = firebaseRef(database, path);
            await firebaseSet(databaseRef, data);
            return true;
        } catch (error) {
            return false;
        }
    }

    /**
     * Deletes data at the specified path.
     * @param {string} path - The path to the data to delete.
     * @returns {boolean} True if the deletion was successful, false otherwise.
     */
    async deleteData(path) {
        try {
            const database = firebaseGetDatabase();
            const databaseRef = firebaseRef(database, path);
            await firebaseRemove(databaseRef);
            return true;
        } catch (error) {
            return false;
        }
    }

    /**
     * Creates a new signed user and stores their data in the database.
     * @param {string} id - The user's ID.  
     * @param {string} firstname - The user's first name.
     * @param {string} lastname - The user's last name.
     * @param {string} pwd - The user's password.
     * @param {string} email - The user's email address.
     * @param {string} phone - The user's phone number.
     * @param {string} initial - The user's initials.
     * @param {string} initialColor - The color associated with the user's initials.
     * @returns {boolean} True if the user was created and data stored successfully, false otherwise.
     */
    async createNewSignedUser(id, firstname, lastname, pwd, email, phone, initial, initialColor) {
        const contact = new Contact(id, firstname, lastname, pwd, email, phone, initial, initialColor);
        const fb = new FirebaseDatabase();
        return await fb.getFirebaseLogin(() => fb.putData(`/contacts/${contact.id}`, contact));
    }

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-scripts_firebase.html">scripts/firebase</a></li></ul><h3>Namespaces</h3><ul><li><a href="addEditContacts.html">addEditContacts</a></li><li><a href="addTaskTemplate.html">addTaskTemplate</a></li><li><a href="board.html">board</a></li><li><a href="boardTaskTemplate.html">boardTaskTemplate</a></li><li><a href="contactTemplates.html">contactTemplates</a></li><li><a href="contacts.html">contacts</a></li><li><a href="dragAndDrop.html">dragAndDrop</a></li><li><a href="greeting.html">greeting</a></li><li><a href="help.html">help</a></li><li><a href="login.html">login</a></li><li><a href="navigations.html">navigations</a></li><li><a href="openCloseDialog.html">openCloseDialog</a></li><li><a href="privacyLegal.html">privacyLegal</a></li><li><a href="script.html">script</a></li><li><a href="summary.html">summary</a></li></ul><h3>Classes</h3><ul><li><a href="AddTaskMobileUtil.html">AddTaskMobileUtil</a></li><li><a href="AddTaskUtils.html">AddTaskUtils</a></li><li><a href="BoardTaskDetailDeleteUtil.html">BoardTaskDetailDeleteUtil</a></li><li><a href="BoardTaskDetailEditUtils.html">BoardTaskDetailEditUtils</a></li><li><a href="BoardTaskDetailViewUtils.html">BoardTaskDetailViewUtils</a></li><li><a href="Contact.html">Contact</a></li><li><a href="ContactAssigned.html">ContactAssigned</a></li><li><a href="CreateNewTask.html">CreateNewTask</a></li><li><a href="DueDateCheck.html">DueDateCheck</a></li><li><a href="EditTaskSafeUtil.html">EditTaskSafeUtil</a></li><li><a href="FirebaseDatabase.html">FirebaseDatabase</a></li><li><a href="Subtask.html">Subtask</a></li><li><a href="SubtaskToTask.html">SubtaskToTask</a></li><li><a href="Task.html">Task</a></li><li><a href="TaskComponents.html">TaskComponents</a></li><li><a href="TaskElements.html">TaskElements</a></li></ul><h3>Global</h3><ul><li><a href="global.html#firebaseConfig">firebaseConfig</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Oct 26 2025 17:07:17 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
