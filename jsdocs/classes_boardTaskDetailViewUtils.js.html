<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: classes/boardTaskDetailViewUtils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: classes/boardTaskDetailViewUtils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This file contains the BoardTaskDetailViewUtils class which provides utility functions to render and manage task details in a board view.
 * It includes methods to display task information, handle assigned contacts, and manage subtasks.
 * It also includes helper functions to generate HTML elements for contacts, categories, and subtasks.
 * The class is designed to work with a task management application, facilitating the display and interaction with task details in a user-friendly manner.
 * Loaded by board detail view page
 * @class BoardTaskDetailViewUtils
 * @property {string} currentTaskID - The ID of the current task.
 * @property {Object} currentTask - The current task object.
 * @property {Object} currentInstance - The current instance of the task.
 */

class BoardTaskDetailViewUtils {

    currentTask;

    /** 
     * Creates an instance of the BoardTaskDetailViewUtils class.
     * @param {string} currentTaskID - The ID of the current task.
     * @param {Object} currentTask - The current task object.
     * @param {Object} currentInstance - The current instance of the task.
     */
    constructor(currentTaskID, currentTask, currentInstance) {
        this.currentTaskID = currentTaskID;
        this.currentTask = currentTask;
        this.currentInstance = currentInstance;
    }

    /**
     * Starts the rendering of task details in the dialog.
     * @returns {void}
     */
    startRenderTaskDetails() {
        if (this.currentTask == null) { return; }
        this.viewCategory();
        this.viewTextInDialog('user-story', this.currentTask.categoryData.title);
        this.viewTextInDialog('task-title', this.currentTask['title']);
        this.viewTextInDialog('task-description', this.currentTask['description']);
        this.viewTextInDialog('task-due-date', this.currentTask['dueDate']);
        this.viewTextInDialog('priority-text', this.currentTask['priority']);
        this.viewPriority();
        this.viewAssignedContacts();
        this.viewSubTasks();
        this.setTaskIDIntoButtons();
    }

    /**
     * Retrieves the current task object.
     * @returns {Object|null} The current task object or null if not found.
     */
    getCurrentTask() {
        const taskFilter = this.tasksArray.filter(x => x['id'] == this.currentTaskID);
        if (taskFilter.length > 0) {
            this.currentTask = taskFilter[0];
        }
    }

    /**
     * Renders the category information in the dialog.
     * @returns {void}
     */
    viewCategory() {
        let catElement = document.getElementById('left-header');
        if (!catElement) { return; }
        catElement.classList.add(this.currentTask.categoryData.categoryColor);
    }

    /**
     * Updates the text content of a specified element in the dialog.
     * @param {string} elementID - The ID of the element to update.
     * @param {string} textValue - The new text value to set.
     * @returns {void}
     */
    viewTextInDialog(elementID, textValue) {
        let element = document.getElementById(elementID);
        if (!element) { return; }
        element.innerHTML = textValue;
    }

    /**
     * Renders the priority information in the dialog.
     * @returns {void}
     */
    viewPriority() {
        let prioIconElement = document.querySelector('.priority-indicator div');
        if (!prioIconElement) { return; }
        const cuurentIconClass = this.currentTask['priority'] == "Urgent" ? "priority-icon-Urgent" :
            this.currentTask['priority'] == "Medium" ? "priority-icon-Medium" : "priority-icon-Low";
        prioIconElement.classList.add(cuurentIconClass);
    }

    /**
     * Renders the assigned contacts in the dialog.
     * Adjusts the container height accordingly.
     * @returns {void}
     */
    viewAssignedContacts() {
        let counter = 0;
        let contactSelectElement = document.getElementById('contact-List-for-task');
        contactSelectElement.innerHTML = "";
        for (let i = 0; i &lt; this.currentTask.assignedContacts.length; i++) {
            if (this.currentTask.assignedContacts[i].length == 0) { continue; }
            contactSelectElement.innerHTML += getContactListElementForView(this.currentTask.assignedContacts[i][0], this.checkIfCurrentUserIsAssigned(this.currentTask.assignedContacts[i][0]['id']));
            counter++;
        }
        const heightOfOneContact = this.getOffsetHeightOfElement('.contact-list-btn') ? this.getOffsetHeightOfElement('.contact-list-btn') + 1 : 55;
        let heightOfContainer = heightOfOneContact * this.currentTask.assignedContacts.length;
        contactSelectElement.style.height = (heightOfContainer) + "px";
    }

    /**
     * @description Checks if the current user is assigned to the task.
     * @function checkIfCurrentUserIsAssigned
     * @memberof BoardTaskDetailViewUtils
     * @param {string} contactID 
     * @returns Boolean indicating if the current user is assigned to the task
     */
    checkIfCurrentUserIsAssigned(contactID) {
        const currentUser = getLogStatus();
        if (!currentUser) { return false; }
        if (currentUser == "guest") { return false; }
        return currentUser == contactID;
    }

    /**
     * Renders the subtask information in the dialog.
     * Get the heights of individual subtasks to set the container height.
     * @returns {void}
     */
    viewSubTasks() {
        const subTaskContainer = document.getElementById('detail-view-subtask-container');
        let subtaskHeightsArray = [];
        if (!this.currentTask.subTasks || this.currentTask.subTasks.length == 0) { return; }
        for (let i = 0; i &lt; this.currentTask.subTasks.length; i++) {
            subTaskContainer.innerHTML += getSubtaskForDetailView(this.currentTask.subTasks[i]);
            const heightOfOneSubtask = this.getOffsetHeightOfElement(`#subtask-content-for-${this.currentTask.subTasks[i]['id']}`);
            subtaskHeightsArray.push(heightOfOneSubtask);
        }
        this.setSubtaskContainerHeight(subtaskHeightsArray);
    }

    /**
     * Set the height of the subtask container based on the heights of individual subtasks.
     * @param {Array&lt;number>} subtaskHeightsArray 
     * @returns {void}
     */
    setSubtaskContainerHeight(subtaskHeightsArray){
        const sum = subtaskHeightsArray.reduce((currentSum, currentHeight) => currentSum + currentHeight, 0);
        const subTaskContainer = document.getElementById('detail-view-subtask-container'); 
        if(!subTaskContainer){return;}
        subTaskContainer.style.height = sum + "px";   
    }


    /**
     * Retrieves the offset height of a specified element.
     * @param {string} elementMarker - The CSS selector for the element.
     * @returns {number} The offset height of the element, or 0 if not found.
     */
    getOffsetHeightOfElement(elementMarker) {
        let element = document.querySelector(elementMarker);
        return element ? element.offsetHeight : 0;
    }

    /**
     * Sets the current task ID into the edit and delete buttons for reference.
     * @returns {void}
     */
    setTaskIDIntoButtons() {
        document.getElementById('detail-view-delete-btn').setAttribute('data-id', `${this.currentTaskID}`);
        document.getElementById('detail-view-edit-btn').setAttribute('data-id', `${this.currentTaskID}`);
    }

    /**
     * Measures the current dialog content height.
     * @returns {Array} - An array containing the header, main content, and footer heights.
     */
    measureCurrentDialogContentHeight() {
        const headerHeight = this.getOffsetHeightOfElement('.task-header');
        const footerHeight = this.getOffsetHeightOfElement('footer.task-detailview-actions') + 24;
        const mainContentHeight = this.getOffsetHeightOfElement('main.task-main');
        return [headerHeight, mainContentHeight, footerHeight];
    }

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-scripts_firebase.html">scripts/firebase</a></li></ul><h3>Namespaces</h3><ul><li><a href="addEditContacts.html">addEditContacts</a></li><li><a href="addTaskTemplate.html">addTaskTemplate</a></li><li><a href="app.html">app</a></li><li><a href="board.html">board</a></li><li><a href="boardDatabase.html">boardDatabase</a></li><li><a href="boardDetailView.html">boardDetailView</a></li><li><a href="boardSearch.html">boardSearch</a></li><li><a href="boardTaskTemplate.html">boardTaskTemplate</a></li><li><a href="boardTasks.html">boardTasks</a></li><li><a href="boardUtils.html">boardUtils</a></li><li><a href="contactTemplates.html">contactTemplates</a></li><li><a href="contacts.html">contacts</a></li><li><a href="dragAndDrop.html">dragAndDrop</a></li><li><a href="greeting.html">greeting</a></li><li><a href="help.html">help</a></li><li><a href="landscapeBlock.html">landscapeBlock</a></li><li><a href="login.html">login</a></li><li><a href="navigations.html">navigations</a></li><li><a href="openCloseDialog.html">openCloseDialog</a></li><li><a href="privacyLegal.html">privacyLegal</a></li><li><a href="script.html">script</a></li><li><a href="summary.html">summary</a></li><li><a href="taskComponents_.html">taskComponents</a></li></ul><h3>Classes</h3><ul><li><a href="AddTaskCache.html">AddTaskCache</a></li><li><a href="AddTaskMobileUtil.html">AddTaskMobileUtil</a></li><li><a href="AddTaskUtils.html">AddTaskUtils</a></li><li><a href="BoardTaskDetailDeleteUtil.html">BoardTaskDetailDeleteUtil</a></li><li><a href="BoardTaskDetailEditUtils.html">BoardTaskDetailEditUtils</a></li><li><a href="BoardTaskDetailViewUtils.html">BoardTaskDetailViewUtils</a></li><li><a href="Contact.html">Contact</a></li><li><a href="ContactAssigned.html">ContactAssigned</a></li><li><a href="CreateNewTask.html">CreateNewTask</a></li><li><a href="DueDateCheck.html">DueDateCheck</a></li><li><a href="EditTaskSafeUtil.html">EditTaskSafeUtil</a></li><li><a href="FirebaseDatabase.html">FirebaseDatabase</a></li><li><a href="Subtask.html">Subtask</a></li><li><a href="SubtaskToTask.html">SubtaskToTask</a></li><li><a href="Task.html">Task</a></li><li><a href="TaskComponents.html">TaskComponents</a></li><li><a href="TaskElements.html">TaskElements</a></li></ul><h3>Mixins</h3><ul><li><a href="taskComponents.categories.html">categories</a></li><li><a href="taskComponents.contacts.html">contacts</a></li><li><a href="taskComponents.create.html">create</a></li><li><a href="taskComponents.layout.html">layout</a></li><li><a href="taskComponents.priority.html">priority</a></li><li><a href="taskComponents.subtasks.html">subtasks</a></li><li><a href="taskComponents.validation.html">validation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#firebaseConfig">firebaseConfig</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Nov 05 2025 20:55:18 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
