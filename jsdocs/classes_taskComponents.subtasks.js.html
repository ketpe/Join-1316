<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: classes/taskComponents.subtasks.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: classes/taskComponents.subtasks.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @description Subtask related methods for TaskComponents class.
 * This mixin provides functionalities to manage subtasks within a task,
 * including adding, removing, and rendering subtasks.
 * @mixin taskComponents.subtasks
 * @see TaskComponents
 */

(function() {
    const taskComponentsPrototype = TaskComponents.prototype;

    /**
     * @description Handles the click event on the subtask input field.
     * If the subtask writing buttons are not visible, it shows them.
     * If they are visible, it hides them.
     * Reset all subtasks to non-edit mode.
     * @function onclickSubtaskInput
     * @memberof taskComponents.subtasks
     * @param {HTMLElement} input - The input field element for the subtask.
     * @returns {void}
     */
    taskComponentsPrototype.onclickSubtaskInput = function(input) {
        if (!input) { return; }
        this.renderSubtasks("", true);
        this.toggleSubWritingButtons(true);

    };

    /**
     * @description Handles the blur event on the subtask input field.
     * Hides the subtask writing buttons.
     * @function onblurSubtaskInput
     * @memberof taskComponents.subtasks
     * @returns {void}
     */
    taskComponentsPrototype.onblurSubtaskInput = function(event, input) {
        let fieldButtons = document.getElementById('sub-writing-buttons');
        const relatedTarget = event.relatedTarget;
        if (!fieldButtons.contains(relatedTarget)) {
            this.toggleSubWritingButtons(false);
            input.value = "";
        }
    }

    /**
     * @description Toggles the visibility of the subtask writing buttons.
     * @function toggleSubWritingButtons
     * @memberof taskComponents.subtasks
     * @param {boolean} visibility - Indicates whether to show or hide the subtask writing buttons.
     * @returns {void}
     */
    taskComponentsPrototype.toggleSubWritingButtons = function(visibility) {
        let fieldButtons = document.getElementById('sub-writing-buttons');
        visibility ? fieldButtons.classList.remove('d-none') : fieldButtons.classList.add('d-none');
    };

    /**
     * @description Handles the pressing of the Enter key in the subtask input field.
     * @function subtaskInputfieldPressEnter
     * @memberof taskComponents.subtasks
     * @param {KeyboardEvent} event - The keyboard event.
     * @param {HTMLElement} inputField - The subtask input field element.
     * @returns {void}
     */
    taskComponentsPrototype.subtaskInputfieldPressEnter = function(event, inputField) {
        if (event.code == "Enter" || event.code == "NumpadEnter") {
            this.toggleSubWritingButtons(false);
            this.adoptCurrentSubEntry();
            inputField.blur();
        }
    };

    /**
     * @description Adopts the current subtask entry.
     * If the input field is empty or has less than 3 characters, it does nothing.
     * Otherwise, it adds the subtask to the current subtask list, clears the input field, and renders the subtasks.
     * Uses TaskUtils to manage the subtask list.
     * Checks the available space in the add task dialog and the add task view after adding the subtask.
     * Change the Height of the right container if needed.
     * @function adoptCurrentSubEntry
     * @memberof taskComponents.subtasks
     * @returns {void}
     */
    taskComponentsPrototype.adoptCurrentSubEntry = function(event) {
        event?.preventDefault();
        let inputfield = document.getElementById('task-sub-task');
        if (!inputfield) { return; }
        const inputValueClean = (inputfield.value ?? "").trim();
        if (inputValueClean.length &lt; 3) { return; }
        this.currentSubTasks = this.addTaskUtils.addSubtaskToArray(inputValueClean, this.currentSubTasks);
        this.clearSubInputField();
        inputfield.blur();
        this.renderSubtasks();
    };

    /**
     * @description Clears the subtask input field.
     * If the input field is not found, it does nothing.
     * Otherwise, it clears the input field, toggles the visibility of the subtask writing buttons, and removes focus from the input field.
     * @function clearSubInputField
     * @memberof taskComponents.subtasks
     * @returns {void}
     */
    taskComponentsPrototype.clearSubInputField = function() {
        let inputfield = document.getElementById('task-sub-task');
        if (!inputfield) { return; }
        inputfield.value = ""; 
        this.toggleSubWritingButtons(false);
        inputfield.blur();

    };

    /**
     * @description Deletes the currently selected subtask.
     * Uses TaskUtils to remove the subtask from the current subtask list.
     * Renders the updated list of subtasks.
     * @function deleteCurrentSelectedSubTask
     * @memberof taskComponents.subtasks
     * @param {string} subtaskID - The ID of the subtask to delete.
     * @returns {void}
     */
    taskComponentsPrototype.deleteCurrentSelectedSubTask = function(subtaskID) {
        this.currentSubTasks = this.addTaskUtils.removeSubtaskFromArray(subtaskID, this.currentSubTasks);
        this.renderSubtasks();
    };

    /**
     * @description Edits the currently selected subtask.
     * @function editCurrentSelectedSubTask
     * @memberof taskComponents.subtasks
     * @param {string} subtaskID - The ID of the subtask to edit.
     * @returns {void}
     */
    taskComponentsPrototype.editCurrentSelectedSubTask = function(subtaskID) {
        this.renderSubtasks(subtaskID);
    };

    /**
     * @description Edits the currently selected subtask.
     * @function editCurrentSelectedSubTask
     * @memberof taskComponents.subtasks
     * @param {string} subtaskID - The ID of the subtask to edit.
     * @returns {void}
     */
    taskComponentsPrototype.editCurrentSelectedSubTask = function(subtaskID) {
        this.renderSubtasks(subtaskID);
    };

    /**
     * @description Safely applies changes to the currently selected subtask.
     * If the subtask is not found, it does nothing.
     * If the input value is less than or equal to 3 characters, it does nothing.
     * Otherwise, it updates the subtask title and re-renders the subtasks.
     * @function safeChangesOnCurrentSelectedSubtask
     * @memberof taskComponents.subtasks
     * @param {string} subtaskID - The ID of the subtask to edit.
     * @returns {void}
     */
    taskComponentsPrototype.safeChangesOnCurrentSelectedSubtask = function(subtaskID) {
        let currentSubTask = this.currentSubTasks.find(x => x['id'] == subtaskID);
        if (!currentSubTask) { return; }
        const inputField = document.getElementById(`subTaskEdit-${subtaskID}`);
        const inputValueClean = (inputField.innerText ?? "").trim();
        if (inputValueClean.length &lt;= 2) { return; }
        currentSubTask['title'] = inputField.innerText;
        this.renderSubtasks();
    };

    /**
     * @description Renders the list of subtasks.
     * If there are no subtasks, it returns early.
     * If an ID for editing is provided, it renders that subtask in edit mode.
     * Otherwise, it renders all subtasks in read-only mode.
     * @function renderSubtasks
     * @memberof taskComponents.subtasks
     * @param {string} idForEdit - The ID of the subtask to edit.
     * @returns {void}
     */
    taskComponentsPrototype.renderSubtasks = function(idForEdit = "", isReset = false) {
        let subTaskList = document.querySelector('.sub-task-list');
        subTaskList.innerHTML = "";
        if (!this.currentSubTasks || this.currentSubTasks.length == 0) { return; }
        for (let i = 0; i &lt; this.currentSubTasks.length; i++) {
            if (this.currentSubTasks[i]['id'] == idForEdit &amp;&amp; !isReset) {
                subTaskList.innerHTML += getSubtaskListElementForChanging(this.currentSubTasks[i], this.currentInstance);
                continue;
            }
            subTaskList.innerHTML += getSubtaskListElementReadOnly(this.currentSubTasks[i], this.currentInstance);
        }
    };

})();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-scripts_firebase.html">scripts/firebase</a></li></ul><h3>Namespaces</h3><ul><li><a href="addEditContacts.html">addEditContacts</a></li><li><a href="addTaskTemplate.html">addTaskTemplate</a></li><li><a href="app.html">app</a></li><li><a href="board.html">board</a></li><li><a href="boardDatabase.html">boardDatabase</a></li><li><a href="boardDetailView.html">boardDetailView</a></li><li><a href="boardSearch.html">boardSearch</a></li><li><a href="boardTaskTemplate.html">boardTaskTemplate</a></li><li><a href="boardTasks.html">boardTasks</a></li><li><a href="boardUtils.html">boardUtils</a></li><li><a href="contactTemplates.html">contactTemplates</a></li><li><a href="contacts.html">contacts</a></li><li><a href="dragAndDrop.html">dragAndDrop</a></li><li><a href="greeting.html">greeting</a></li><li><a href="help.html">help</a></li><li><a href="landscapeBlock.html">landscapeBlock</a></li><li><a href="login.html">login</a></li><li><a href="navigations.html">navigations</a></li><li><a href="openCloseDialog.html">openCloseDialog</a></li><li><a href="privacyLegal.html">privacyLegal</a></li><li><a href="script.html">script</a></li><li><a href="summary.html">summary</a></li><li><a href="taskComponents_.html">taskComponents</a></li></ul><h3>Classes</h3><ul><li><a href="AddTaskCache.html">AddTaskCache</a></li><li><a href="AddTaskMobileUtil.html">AddTaskMobileUtil</a></li><li><a href="AddTaskUtils.html">AddTaskUtils</a></li><li><a href="BoardTaskDetailDeleteUtil.html">BoardTaskDetailDeleteUtil</a></li><li><a href="BoardTaskDetailEditUtils.html">BoardTaskDetailEditUtils</a></li><li><a href="BoardTaskDetailViewUtils.html">BoardTaskDetailViewUtils</a></li><li><a href="Contact.html">Contact</a></li><li><a href="ContactAssigned.html">ContactAssigned</a></li><li><a href="CreateNewTask.html">CreateNewTask</a></li><li><a href="DueDateCheck.html">DueDateCheck</a></li><li><a href="EditTaskSafeUtil.html">EditTaskSafeUtil</a></li><li><a href="FirebaseDatabase.html">FirebaseDatabase</a></li><li><a href="Subtask.html">Subtask</a></li><li><a href="SubtaskToTask.html">SubtaskToTask</a></li><li><a href="Task.html">Task</a></li><li><a href="TaskComponents.html">TaskComponents</a></li><li><a href="TaskElements.html">TaskElements</a></li></ul><h3>Mixins</h3><ul><li><a href="taskComponents.categories.html">categories</a></li><li><a href="taskComponents.contacts.html">contacts</a></li><li><a href="taskComponents.create.html">create</a></li><li><a href="taskComponents.layout.html">layout</a></li><li><a href="taskComponents.priority.html">priority</a></li><li><a href="taskComponents.subtasks.html">subtasks</a></li><li><a href="taskComponents.validation.html">validation</a></li></ul><h3>Global</h3><ul><li><a href="global.html#firebaseConfig">firebaseConfig</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Nov 05 2025 20:55:18 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
